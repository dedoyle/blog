(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{228:function(e,t,a){"use strict";a.r(t);var n=a(3),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[e._v("#")]),e._v(" nginx")]),e._v(" "),a("h2",{attrs:{id:"install-on-rhel-centos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-on-rhel-centos"}},[e._v("#")]),e._v(" install on RHEL/CentOS")]),e._v(" "),a("p",[e._v("Install the prerequisites:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    sudo yum install yum-utils\n")])])]),a("p",[e._v("To set up the yum repository, create the file named /etc/yum.repos.d/nginx.repo with the following contents:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    [nginx-stable]\n    name=nginx stable repo\n    baseurl=http://nginx.org/packages/centos/$releasever/$basearch/\n    gpgcheck=1\n    enabled=1\n    gpgkey=https://nginx.org/keys/nginx_signing.key\n    module_hotfixes=true\n\n    [nginx-mainline]\n    name=nginx mainline repo\n    baseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\n    gpgcheck=1\n    enabled=0\n    gpgkey=https://nginx.org/keys/nginx_signing.key\n    module_hotfixes=true\n")])])]),a("p",[e._v("By default, the repository for stable nginx packages is used. If you would like to use mainline nginx packages, run the following command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    sudo yum-config-manager --enable nginx-mainline\n")])])]),a("p",[e._v("To install nginx, run the following command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    sudo yum install nginx\n")])])]),a("p",[e._v("When prompted to accept the GPG key, verify that the fingerprint matches 573B FD6B 3D8F BC64 1079 A6AB ABF5 BD82 7BD9 BF62, and if so, accept it.")]),e._v(" "),a("h2",{attrs:{id:"remove-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remove-nginx"}},[e._v("#")]),e._v(" remove nginx")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    yum remove nginx\n")])])]),a("h2",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[e._v("#")]),e._v(" 配置文件")]),e._v(" "),a("ul",[a("li",[e._v("main：用于进行nginx全局信息的配置")]),e._v(" "),a("li",[e._v("events：用于nginx工作模式的配置")]),e._v(" "),a("li",[e._v("http：用于进行http协议信息的一些配置")]),e._v(" "),a("li",[e._v("server：用于进行服务器访问信息的配置")]),e._v(" "),a("li",[e._v("location：用于进行访问路由的配置")]),e._v(" "),a("li",[e._v("upstream：用于进行负载均衡的配置")])]),e._v(" "),a("h2",{attrs:{id:"main模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#main模块"}},[e._v("#")]),e._v(" main模块")]),e._v(" "),a("p",[e._v("观察下面的配置代码")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    # user nobody nobody;\n    worker_processes 2;\n    # error_log logs/error.log\n    # error_log logs/error.log notice\n    # error_log logs/error.log info\n    # pid logs/nginx.pid\n    worker_rlimit_nofile 1024;\n")])])]),a("p",[e._v("上述配置都是存放在 main 全局配置模块中的配置项")]),e._v(" "),a("ul",[a("li",[e._v("user用来指定nginx worker进程运行用户以及用户组，默认nobody账号运行")]),e._v(" "),a("li",[e._v("worker_processes指定nginx要开启的子进程数量，运行过程中监控每个进程消耗内存(一般几M~几十M不等)根据实际情况进行调整，通常数量是CPU内核数量的整数倍")]),e._v(" "),a("li",[e._v("error_log定义错误日志文件的位置及输出级别【debug / info / notice / warn / error / crit】")]),e._v(" "),a("li",[e._v("pid用来指定进程id的存储文件的位置")]),e._v(" "),a("li",[e._v("worker_rlimit_nofile用于指定一个进程可以打开最多文件数量的描述")])]),e._v(" "),a("h2",{attrs:{id:"event-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-模块"}},[e._v("#")]),e._v(" event 模块")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    event {\n        worker_connections 1024;\n        multi_accept on;\n        use epoll;\n    }\n")])])]),a("p",[e._v("上述配置是针对nginx服务器的工作模式的一些操作配置")]),e._v(" "),a("ul",[a("li",[e._v("worker_connections 指定最大可以同时接收的连接数量，这里一定要注意，最大连接数量是和worker processes共同决定的。")]),e._v(" "),a("li",[e._v("multi_accept 配置指定nginx在收到一个新连接通知后尽可能多的接受更多的连接")]),e._v(" "),a("li",[e._v("use epoll 配置指定了线程轮询的方法，如果是linux2.6+，使用epoll，如果是BSD如Mac请使用Kqueue")])]),e._v(" "),a("h2",{attrs:{id:"http模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http模块"}},[e._v("#")]),e._v(" http模块")]),e._v(" "),a("p",[e._v("作为web服务器，http模块是nginx最核心的一个模块，配置项也是比较多的，项目中会设置到很多的实际业务场景，需要根据硬件信息进行适当的配置，常规情况下，使用默认配置即可。")]),e._v(" "),a("h2",{attrs:{id:"server模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server模块"}},[e._v("#")]),e._v(" server模块")]),e._v(" "),a("p",[e._v("srever模块配置是http模块中的一个子模块，用来定义一个虚拟访问主机，也就是一个虚拟服务器的配置信息")]),e._v(" "),a("p",[e._v("核心配置信息如下：")]),e._v(" "),a("ul",[a("li",[e._v("server：一个虚拟主机的配置，一个http中可以配置多个server")]),e._v(" "),a("li",[e._v("server_name：用力啊指定ip地址或者域名，多个配置之间用空格分隔")]),e._v(" "),a("li",[e._v("root：表示整个server虚拟主机内的根目录，所有当前主机中web项目的根目录")]),e._v(" "),a("li",[e._v("index：用户访问web网站时的全局首页")]),e._v(" "),a("li",[e._v("charset：用于设置www/路径中配置的网页的默认编码格式")]),e._v(" "),a("li",[e._v("access_log：用于指定该虚拟主机服务器中的访问记录日志存放路径")]),e._v(" "),a("li",[e._v("error_log：用于指定该虚拟主机服务器中访问错误日志的存放路径")])]),e._v(" "),a("h2",{attrs:{id:"location模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location模块"}},[e._v("#")]),e._v(" location模块")]),e._v(" "),a("p",[e._v("location模块是nginx配置中出现最多的一个配置，主要用于配置路由访问信息")]),e._v(" "),a("p",[e._v("在路由访问信息配置中关联到反向代理、负载均衡等等各项功能，所以location模块也是一个非常重要的配置模块")]),e._v(" "),a("p",[e._v("基本配置")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    location / {\n        root    /nginx/www;\n        index    index.php index.html index.htm;\n    }\n")])])]),a("ul",[a("li",[e._v("location /：表示匹配访问根目录")]),e._v(" "),a("li",[e._v("root：用于指定访问根目录时，访问虚拟主机的web目录")]),e._v(" "),a("li",[e._v("index：在不指定访问具体资源时，默认展示的资源文件列表")])]),e._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[e._v("#")]),e._v(" 使用")]),e._v(" "),a("p",[e._v("First enable nginx service by running systemctl command so that it start at server boot time:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    $ sudo systemctl enable nginx\n")])])]),a("ul",[a("li",[e._v("Start Nginx command")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ sudo systemctl start nginx\n")])])]),a("ul",[a("li",[e._v("Stop Nginx command")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ sudo systemctl stop nginx\n")])])]),a("ul",[a("li",[e._v("Restart Nginx command")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    $ sudo systemctl restart nginx\n")])])]),a("p",[e._v("Find status of Nginx server command")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    $ systemctl status nginx\n")])])]),a("p",[a("a",{attrs:{href:"https://www.cyberciti.biz/faq/how-to-install-and-use-nginx-on-centos-7-rhel-7/",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to install and use Nginx on CentOS 7 / RHEL 7"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=s.exports}}]);